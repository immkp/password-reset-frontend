(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{163:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),s=n(51),c=n.n(s),o=(n(58),n(59),n(14)),i=n(5),u=n(0);function j(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{style:{textAlign:"center"},children:[Object(u.jsx)("h1",{children:"Welcome to Password Reset flow"}),Object(u.jsx)(o.b,{to:"/user/login",children:"Continue"})]})})}var l=n(3),b=n.n(l),p=n(7),h=n(4),d=(n(26),n(13)),O=n.n(d);function x(e){var t=Object(r.useState)(""),n=Object(h.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)(""),i=Object(h.a)(c,2),j=i[0],l=i[1],d=Object(r.useState)(!0),x=Object(h.a)(d,2),f=x[0],m=x[1],g=Object(r.useState)(""),w=Object(h.a)(g,2),v=w[0],k=w[1],y=Object(r.useState)(""),S=Object(h.a)(y,2),N=S[0],C=S[1],F=function(){var t=Object(p.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k(""),!a||!j){t.next=6;break}return t.next=4,O.a.post("https://urlshortener-mern.herokuapp.com/api/users/login",{email:a,password:j}).then(function(){var t=Object(p.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k(n.data.message);case 2:return t.next=4,C(n.data.instruction);case 4:setTimeout((function(){n.data.token&&e.history.push({pathname:"/dashboard",state:{email:a,token:n.data.token}})}),1e3);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 4:t.next=7;break;case 6:k("Fields can not be empty");case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"login-wrapper",children:[Object(u.jsx)("h1",{children:"Log in and start sharing"}),Object(u.jsxs)("h4",{children:["Don't have an account? ",Object(u.jsx)(o.b,{to:"/user/register",className:"link",children:"Sign up"})]}),Object(u.jsxs)("div",{className:"form-wrapper",children:[Object(u.jsx)("label",{children:"Email address or username"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"email",onChange:function(e){return s(e.target.value)},required:!0}),Object(u.jsx)("br",{}),Object(u.jsxs)("div",{className:"pass-wrapper",children:[Object(u.jsx)("label",{className:"pass",children:"Password "}),Object(u.jsxs)("button",{className:"showhide",onClick:function(){return m(!f)},children:[Object(u.jsx)("i",{className:"fas fa-eye"})," Show"]})]}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:f?"password":"text",onChange:function(e){return l(e.target.value)},required:!0}),Object(u.jsx)("br",{}),Object(u.jsx)(o.b,{to:"/user/forgot-password",className:"link",children:"Forgot your password?"}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{className:"login",onClick:F,children:"Login"}),Object(u.jsxs)("div",{style:{color:"green"},children:[v," ",N]})]})]})})}var f=n(53),m=n.n(f);function g(){var e=Object(r.useState)(""),t=Object(h.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(""),c=Object(h.a)(s,2),i=c[0],j=c[1],l=Object(r.useState)(""),d=Object(h.a)(l,2),x=d[0],f=d[1],g=Object(r.useState)(!0),w=Object(h.a)(g,2),v=w[0],k=w[1],y=Object(r.useState)(""),S=Object(h.a)(y,2),N=S[0],C=S[1],F=Object(r.useState)(""),P=Object(h.a)(F,2),E=P[0],R=P[1],A=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(""),!(n&&m.a.isEmail(i)&&x)){e.next=6;break}return e.next=4,O.a.post("https://urlshortener-mern.herokuapp.com/api/users/register",{firstname:n,email:i,token:"",password:x,role:"user",status:"Not Active"}).then(function(){var e=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t.data.message);case 2:return e.next=4,R(t.data.instruction);case 4:setTimeout((function(){window.location.reload()}),5e3);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 4:e.next=7;break;case 6:C("Enter valid email and Fields can not be empty");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"login-wrapper",children:[Object(u.jsx)("h1",{children:"Sign up and start shortening"}),Object(u.jsxs)("h4",{children:["Already have an account? ",Object(u.jsx)(o.b,{to:"/user/login",className:"link",children:"Login"})]}),Object(u.jsxs)("div",{className:"form-wrapper",children:[Object(u.jsx)("label",{children:"Username"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",onChange:function(e){return a(e.target.value)}}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{children:"Email address or username"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",onChange:function(e){return j(e.target.value)}}),Object(u.jsx)("br",{}),Object(u.jsxs)("div",{className:"pass-wrapper",children:[Object(u.jsx)("label",{className:"pass",children:"Password "}),Object(u.jsxs)("button",{className:"showhide",onClick:function(){return k(!v)},children:[Object(u.jsx)("i",{className:"fas fa-eye"})," Show"]})]}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:v?"password":"text",onChange:function(e){return f(e.target.value)}}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{className:"login",onClick:A,children:"Sign Up"})]}),Object(u.jsxs)("div",{style:{color:"green"},children:[N," ",E]})]})})}n(50);function w(){var e=Object(r.useState)(""),t=Object(h.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(""),c=Object(h.a)(s,2),o=c[0],i=c[1],j=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("https://urlshortener-mern.herokuapp.com/api/users/reset-password",{email:n}).then((function(e){i(e.data.message)})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"wrapper",children:[Object(u.jsxs)("div",{className:"forgot-wrapper",children:[Object(u.jsx)("h3",{children:"FORGOT YOUR PASSWORD?"}),Object(u.jsx)("p",{children:"Just enter the email or username you signed up with and we'll let you reset it."}),Object(u.jsx)("label",{children:"Email address or username"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"text",onChange:function(e){return a(e.target.value)}}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{className:"login",onClick:j,children:"Reset"})]}),Object(u.jsx)("div",{style:{color:"green"},children:o})]})})}function v(e){var t=Object(r.useState)(""),n=Object(h.a)(t,2),a=n[0],s=n[1],c=Object(r.useState)(""),o=Object(h.a)(c,2),i=o[0],j=o[1],l=Object(r.useState)(""),d=Object(h.a)(l,2),x=d[0],f=d[1],m=function(){var t=Object(p.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a!==i){t.next=6;break}return f(""),t.next=4,O.a.post("https://urlshortener-mern.herokuapp.com/api/users/update-password",{token:e.match.params.token,password:a}).then(function(){var t=Object(p.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f(n.data.message);case 2:setTimeout((function(){if("Password Updated Successfully"===n.data.message){e.history.push("/user/login")}}),2e3);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 4:t.next=7;break;case 6:f("Password Does Not match");case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("div",{className:"wrapper",children:Object(u.jsxs)("div",{className:"forgot-wrapper",children:[Object(u.jsx)("h3",{children:"RESET PASSWORD?"}),Object(u.jsx)("p",{children:"Password must be 6 or more characters in length and any combination of letters and numbers"}),Object(u.jsx)("label",{children:"New Password"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"password",onChange:function(e){return s(e.target.value)}}),Object(u.jsx)("br",{}),Object(u.jsx)("label",{children:"Confirm Password"}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"password",onChange:function(e){return j(e.target.value)}}),Object(u.jsx)("br",{}),Object(u.jsx)("button",{className:"login",onClick:m,children:"Reset"}),Object(u.jsx)("p",{style:{color:"green"},children:x})]})})})}function k(e){var t=Object(r.useState)(""),n=Object(h.a)(t,2),a=n[0],s=n[1];Object(r.useEffect)((function(){function t(){return(t=Object(p.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.location.state){t.next=6;break}return s(e.location.state.email),t.next=4,O.a.post("https://urlshortener-mern.herokuapp.com/api/users/authenticate",{token:e.location.state.token}).then(function(){var t=Object(p.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(n.data.auth),n.data.auth||e.history.push("/user/login");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return console.log(e)}));case 4:t.next=7;break;case 6:e.history.push("/user/login");case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.location.state,e.history]);var c=function(){var t=Object(p.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.post("https://urlshortnerbe.herokuapp.com/users/logout",{email:e.location.state.email}).then(Object(p.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.history.push("/home");case 1:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("h3",{children:["Welcome to Password Reset flow ",a]}),Object(u.jsx)("button",{className:"btn btn-danger",onClick:c,children:"Logout"})]})}var y=function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(o.a,{children:Object(u.jsxs)(i.c,{children:[Object(u.jsx)(i.a,{path:"/home",component:j}),Object(u.jsx)(i.a,{path:"/user/login",component:x}),Object(u.jsx)(i.a,{path:"/user/register",component:g}),Object(u.jsx)(i.a,{path:"/user/forgot-password",component:w}),Object(u.jsx)(i.a,{path:"/user/update-password/:token",component:v}),Object(u.jsx)(i.a,{path:"/dashboard",component:k}),Object(u.jsx)(i.a,{path:"/",component:j})]})})})};c.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(y,{})}),document.getElementById("root"))},26:function(e,t,n){},50:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){}},[[163,1,2]]]);
//# sourceMappingURL=main.c0dde597.chunk.js.map